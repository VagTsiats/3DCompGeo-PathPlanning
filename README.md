# 3D Computational Geometry & Computer Vision - Path Planning Project

## Μέρος Α

Σε αυτό το μέρος της εργασίας ασχολούμαστε με ένα mesh εσωτερικού χώρου με σκοπό την αναγνώριση
επιπέδων όπως το ταβάνι, οι τοίχοι, το πάτωμακαι την απομόνωση των εσωτερικών αντικειμένων του 
δωματίου. Η προσέγγιση του θέματος έγινε με χρήση voxel grids καθώς απλουστεύουν
την αναγνώριση δομών και διευκολύνουν την επεξεργασία των δεδομένων.

### Βήματα Υλοποίησης
1. **Φόρτωση Δεδομένων**

    Το σύνολο δεδομένων που χρησιμοποιείται σε αυτή την ανάλυση προέρχεται από το 
    [Stanford 3D Indoor Spaces Dataset (S3DIS)](http://buildingparser.stanford.edu/dataset.html).
    Αρχικά επιλέχθηκε ένα δωμάτιο με μια ανοιχτή πόρτα και χωρίς παράθυρα, το οποίο φορτώθηκε από τον
    κώδικα με χρήση της βιβλιοθήκης open3d.


2. **Ανίχνευση επιπέδων** 

    Για την ανίχνευση των επιπέδων τα αρχικά δεδομένα μετατράπηκαν σε voxel grid. Κάθε voxel αντιπροσωπεύει
    έναν μικρό κυβικό όγκο στον χώρο και η ανάλυση του mesh σε voxels επιτρέπει την πιο εύκολη αναγνώριση
    επιπέδων και δομών.Στη συνέχεια κάθε voxel κατηγοριοποιήθηκε με βάση το normal διάνυσμα του τριγώνου με
    το οποίο επικαλύπτωνται στον χώρο, ως εξής:

    - **Ceiling (Ταβάνι)**
    - **Floor (Πάτωμα)**
    - **Wall (Τοίχος)**
    - **Occupied (Κατειλημμένο)** 

    Αφού γίνει η αρχική κατηγοριοποίηση εφαρμόζονται αρκετές διαδιχικές σαρώσεις στο voxel grid
    για φιλτράρισμα και ανίχνευση μεγάλων επιφανειών απο τις οποίες επιλέγονται τα επιθυμητά επίπεδα (πάτωμα, ταβάνι, τοίχοι).
    Η επιλογή γίνεται χρησιμοποιώντας κανόνες που βασίζονται στη γεωμετρία και την κατανομή των σημείων εντός του
    voxel grid. 

    Μετά την αναγνώριση των επιπέδων, οι υπόλοιπες περιοχές που δεν ανήκουν στα μεγάλα επίπεδα κατηγοριοποιούνται
    ως κατειλημμένες και αποτελλούν τα εσωτερικά αντικείμενα του δωματίου. Αυτή η διαδικασία επιτρέπει την
    απομόνωση των αντικειμένων από τις υπόλοιπες δομές του δωματίου.

3. **Δειγματοληψία Mesh σε Point Cloud**

    Στο βήμα αυτό υλοποιήθηκε μια μέθοδος δειγματοληψίας στο αρχικό mesh, με παραμετροποιήσιμο αριθμό σημείων.

4. **Ανίχνευση Επιπέδων σε Point Cloud Δεδομένα**

    Εφόσον τα αρχικά δενομένα είναι σε μορφή PointCloud, μετατρέπονται ξανά σε voxel grid και εφαρμόζονται
    οι μέθοδοι του βήματος 2, με την διαφορά πως κατα την αρχική μετατροπή των δεδομένων, κάθε voxel
    χαρακτηρίζεται με βάση το μέσο διάνυσμα normal των σημείων που περικλείει.



### Παρατηρήσεις
Η μεθοδός με χρήση και voxel grids προτιμήθηκε καθώς είναι ικανή να επεξεργάζεται δεδομένα από πολλά δωμάτια
ταυτόχρονα και να αντιμετωπίζει περιπτώσεις όπου οι τοίχοι δεν είναι κάθετοι μεταξύ τους και η ακρίβεια των 
αποτελεσμάτων της μπορεί να βελτιωθεί με παραπάνω επεξεργασία. Επιπλέον εκτιμάται οτι μπορεί να διευκολύνει 
την υλοποίηση του δεύτερου μέρους της εργασίας 

### Οδηγίες
Με την εκτέλεση του αρχείου `voxels.py` εκτελείται ο παρακάτω κώδικας για κάθε ερώτημα.

```python
    #A1
    room_mesh = o3d.io.read_triangle_mesh("dataset/area_1/RoomMesh.ply")

    # A2
    voxelize_mesh(room_mesh)

    # A3
    room_pcd = uniform_sample.sample_mesh_uniformly(room_mesh, int(1e6))

    # A4
    voxelize_pcd(room_pcd)
```

Η υλοποίηση της δειγματολειψίας γίνεται στο αρχείο `uniform_sample.py`
